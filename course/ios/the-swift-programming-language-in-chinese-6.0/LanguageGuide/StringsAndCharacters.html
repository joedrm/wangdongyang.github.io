<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.1.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <link rel="alternate" href="/atom.xml" title="那年星空" type="application/atom+xml">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '7.5.0',
    exturl: false,
    sidebar: {"position":"left","display":"hide","offset":12,"onmobile":false},
    copycode: {"enable":true,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: 'search.xml',
    motion: {"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: '复制',
      copy_success: '复制成功',
      copy_failure: '复制失败'
    },
    sidebarPadding: 40
  };
</script>

  <meta name="description" content="字符串和字符存储和操作文本 字符串 是一系列字符的集合，例如 &quot;hello, world&quot;，&quot;albatross&quot;。Swift 的字符串通过 String 类型来表示。而 String 内容的访问方式有多种，例如以 Character 值的集合。 Swift 的 String 和 Character 类型提供了一种快速且兼容 Unicode 的方式来处理代码中的文本内容。创建和操作字符串的语法与">
<meta property="og:type" content="website">
<meta property="og:title" content="那年星空">
<meta property="og:url" content="https://wanflutter.netlify.app/course/ios/the-swift-programming-language-in-chinese-6.0/LanguageGuide/StringsAndCharacters.html">
<meta property="og:site_name" content="那年星空">
<meta property="og:description" content="字符串和字符存储和操作文本 字符串 是一系列字符的集合，例如 &quot;hello, world&quot;，&quot;albatross&quot;。Swift 的字符串通过 String 类型来表示。而 String 内容的访问方式有多种，例如以 Character 值的集合。 Swift 的 String 和 Character 类型提供了一种快速且兼容 Unicode 的方式来处理代码中的文本内容。创建和操作字符串的语法与">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://wanflutter.netlify.app/course/ios/the-swift-programming-language-in-chinese-6.0/LanguageGuide/StringsAndCharacters/multilineStringWhitespace">
<meta property="og:image" content="https://wanflutter.netlify.app/course/ios/the-swift-programming-language-in-chinese-6.0/LanguageGuide/StringsAndCharacters/stringSubstring">
<meta property="og:image" content="https://wanflutter.netlify.app/UTF8">
<meta property="og:image" content="https://wanflutter.netlify.app/course/ios/the-swift-programming-language-in-chinese-6.0/LanguageGuide/StringsAndCharacters/UTF16">
<meta property="og:image" content="https://wanflutter.netlify.app/course/ios/the-swift-programming-language-in-chinese-6.0/LanguageGuide/StringsAndCharacters/UnicodeScalar">
<meta property="article:published_time" content="2025-03-08T08:32:48.705Z">
<meta property="article:modified_time" content="2025-03-08T08:32:48.705Z">
<meta property="article:author" content="joe">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://wanflutter.netlify.app/course/ios/the-swift-programming-language-in-chinese-6.0/LanguageGuide/StringsAndCharacters/multilineStringWhitespace">

<link rel="canonical" href="https://wanflutter.netlify.app/course/ios/the-swift-programming-language-in-chinese-6.0/LanguageGuide/StringsAndCharacters">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: false,
    isPage: true,
    isArchive: false
  };
</script>

  <title> | 那年星空
  </title>
  


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?6ad7c0c3175207d3b8885d6a63355af1";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">那年星空</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
  
  

          <div class="content">
            

  <div class="posts-expand">
    
    
    
    <div class="post-block" lang="zh-CN">
      <header class="post-header">

<h1 class="post-title" itemprop="name headline">
</h1>

<div class="post-meta">
  
  <ul class="breadcrumb">
          
            <li><a href="/course/">COURSE</a></li>
            <li><a href="/course/ios/">IOS</a></li>
            <li><a href="/course/ios/the-swift-programming-language-in-chinese-6.0/">THE-SWIFT-PROGRAMMING-LANGUAGE-IN-CHINESE-6.0</a></li>
            <li><a href="/course/ios/the-swift-programming-language-in-chinese-6.0/LanguageGuide/">LANGUAGEGUIDE</a></li>
            <li>STRINGSANDCHARACTERS</li>
          
  </ul>

</div>

</header>

      
      
      
      <div class="post-body">
          <html><head></head><body></body></html><html><head></head><body><h1 id="字符串和字符"><a href="#字符串和字符" class="headerlink" title="字符串和字符"></a>字符串和字符</h1><p>存储和操作文本</p>
<p><strong>字符串</strong> 是一系列字符的集合，例如 <code>"hello, world"</code>，<code>"albatross"</code>。Swift 的字符串通过 <code>String</code> 类型来表示。而 <code>String</code> 内容的访问方式有多种，例如以 <code>Character</code> 值的集合。</p>
<p>Swift 的 <code>String</code> 和 <code>Character</code> 类型提供了一种快速且兼容 Unicode 的方式来处理代码中的文本内容。创建和操作字符串的语法与 C 语言中字符串操作相似，轻量并且易读。通过 <code>+</code> 符号就可以非常简单的实现两个字符串的拼接操作。与 Swift 中其他值一样，能否更改字符串的值，取决于其被定义为常量还是变量。你可以在已有字符串中插入常量、变量、字面量和表达式从而形成更长的字符串，这一过程也被称为字符串插值。在显示、存储和打印创建自定义字符串值时，字符串插值操作尤其有用。</p>
<p>尽管语法简易，但 Swift 中的 <code>String</code> 类型的实现却很快速和现代化。每一个字符串都是由编码无关的 Unicode 字符组成，并支持以多种 Unicode 表示形式访问字符。</p>
<blockquote>
<p>注意:<br>Swift 的 <code>String</code> 类型与 Foundation <code>NSString</code> 类进行了无缝桥接。<br>Foundation 还对 <code>String</code> 进行扩展使其可以访问 <code>NSString</code> 类型中定义的方法。<br>这意味着调用那些 NSString 的方法，你无需进行任何类型转换。</p>
<p>更多关于在 Foundation 和 Cocoa 中使用 <code>String</code> 的信息请查看 <a target="_blank" rel="noopener" href="https://developer.apple.com/documentation/swift/string#2919514">Bridging Between String and NSString</a>.</p>
</blockquote>
<h2 id="字符串字面量"><a href="#字符串字面量" class="headerlink" title="字符串字面量"></a>字符串字面量</h2><p>你可以在代码里使用一段预定义的字符串值作为 <strong>字符串字面量</strong>。字符串字面量是由一对双引号(<code>"</code>)包裹着的具有固定顺序的字符集。</p>
<p>使用字符串文字作为常量或变量的初始值:</p>
<figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> someString <span class="operator">=</span> <span class="string">"Some string literal value"</span></span><br></pre></td></tr></tbody></table></figure>

<!--
  - test: `stringLiterals`

  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-&gt; let someString = &quot;Some string literal value&quot;</span><br></pre></td></tr></table></figure>
<p>–&gt;</p>
<p>注意，Swift 之所以推断 <code>someString</code> 常量为 <code>String</code> 类型，是因为它使用了字面量方式进行初始化。</p>
<h3 id="多行字符串字面量"><a href="#多行字符串字面量" class="headerlink" title="多行字符串字面量"></a>多行字符串字面量</h3><p>如果你需要一个多行字符串，那就使用多行字符串字面量 — 由一对三个双引号包裹着的具有固定顺序的文本字符集:</p>
<!--
  Quote comes from "Alice's Adventures in Wonderland",
  which has been public domain as of 1907.
-->

<figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> quotation <span class="operator">=</span> <span class="string">"""</span></span><br><span class="line"><span class="string">The White Rabbit put on his spectacles.  "Where shall I begin,</span></span><br><span class="line"><span class="string">please your Majesty?" he asked.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">"Begin at the beginning," the King said gravely, "and go on</span></span><br><span class="line"><span class="string">till you come to the end; then stop."</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></tbody></table></figure>

<!--
  - test: `multiline-string-literals`

  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">-&gt; let quotation = &quot;&quot;&quot;</span><br><span class="line">   The White Rabbit put on his spectacles.  &quot;Where shall I begin,</span><br><span class="line">   please your Majesty?&quot; he asked.</span><br><span class="line"></span><br><span class="line">   &quot;Begin at the beginning,&quot; the King said gravely, &quot;and go on</span><br><span class="line">   till you come to the end; then stop.&quot;</span><br><span class="line">   &quot;&quot;&quot;</span><br><span class="line">&gt;&gt; let newlines = quotation.filter &#123; $0 == &quot;\n&quot; &#125;</span><br><span class="line">&gt;&gt; print(newlines.count)</span><br><span class="line">&lt;&lt; 4</span><br></pre></td></tr></table></figure>
<p>–&gt;</p>
<p>一个多行字符串字面量包含了所有的在开启和关闭引号（<code>&quot;&quot;&quot;</code>）中的行。这个字符从开启引号（<code>&quot;&quot;&quot;</code>）之后的第一行开始，到关闭引号（<code>&quot;&quot;&quot;</code>）之前为止。这就意味着字符串开启引号之后（<code>&quot;&quot;&quot;</code>）或者结束引号（<code>&quot;&quot;&quot;</code>）之前都没有换行符号。（译者：下面两个字符串其实是一样的，虽然第二个使用了多行字符串的形式）</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> singleLineString <span class="operator">=</span> <span class="string">&quot;These are the same.&quot;</span></span><br><span class="line"><span class="keyword">let</span> multilineString <span class="operator">=</span> <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">These are the same.</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<!--
  - test: `multiline-string-literals`

  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-&gt; let singleLineString = &quot;These are the same.&quot;</span><br><span class="line">-&gt; let multilineString = &quot;&quot;&quot;</span><br><span class="line">   These are the same.</span><br><span class="line">   &quot;&quot;&quot;</span><br><span class="line">&gt;&gt; print(singleLineString == multilineString)</span><br><span class="line">&lt;&lt; true</span><br></pre></td></tr></table></figure>
<p>–&gt;</p>
<p>如果你的代码中，多行字符串字面量包含换行符的话，则多行字符串字面量中也会包含换行符。如果你想换行，以便加强代码的可读性，但是你又不想在你的多行字符串字面量中出现换行符的话，你可以用在行尾写一个反斜杠（<code>\</code>）作为续行符。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> softWrappedQuotation <span class="operator">=</span> <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">The White Rabbit put on his spectacles.  &quot;Where shall I begin, <span class="subst">\</span></span></span><br><span class="line"><span class="subst"><span class="string"></span>please your Majesty?&quot; he asked.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;Begin at the beginning,&quot; the King said gravely, &quot;and go on <span class="subst">\</span></span></span><br><span class="line"><span class="subst"><span class="string"></span>till you come to the end; then stop.&quot;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<!--
  - test: `multiline-string-literals`

  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">-&gt; let softWrappedQuotation = &quot;&quot;&quot;</span><br><span class="line">   The White Rabbit put on his spectacles.  &quot;Where shall I begin, \</span><br><span class="line">   please your Majesty?&quot; he asked.</span><br><span class="line"></span><br><span class="line">   &quot;Begin at the beginning,&quot; the King said gravely, &quot;and go on \</span><br><span class="line">   till you come to the end; then stop.&quot;</span><br><span class="line">   &quot;&quot;&quot;</span><br><span class="line">&gt;&gt; let softNewlines = softWrappedQuotation.filter &#123; $0 == &quot;\n&quot; &#125;</span><br><span class="line">&gt;&gt; print(softNewlines.count)</span><br><span class="line">&lt;&lt; 2</span><br></pre></td></tr></table></figure>
<p>–&gt;</p>
<p>为了让一个多行字符串字面量开始和结束于换行符，请将换行写在第一行和最后一行，例如：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> lineBreaks <span class="operator">=</span> <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">This string starts with a line break.</span></span><br><span class="line"><span class="string">It also ends with a line break.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<!--
  - test: `multiline-string-literals`

  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-&gt; let lineBreaks = &quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line">   This string starts with a line break.</span><br><span class="line">   It also ends with a line break.</span><br><span class="line"></span><br><span class="line">   &quot;&quot;&quot;</span><br></pre></td></tr></table></figure>
<p>–&gt;</p>
<!--
  These are well-fed lines!
-->

<p>一个多行字符串字面量能够缩进来匹配周围的代码。关闭引号（<code>"""</code>）之前的空白字符串告诉 Swift 编译器其他各行多少空白字符串需要忽略。然而，如果你在某行的前面写的空白字符串超出了关闭引号（<code>"""</code>）之前的空白字符串，则超出部分将被包含在多行字符串字面量中。</p>
<p><img src="/course/ios/the-swift-programming-language-in-chinese-6.0/LanguageGuide/StringsAndCharacters/multilineStringWhitespace"></p>
<!--
  Using an image here is a little clearer than a code listing,
  since it can call out which spaces "count".
-->

<!--
  - test: `multiline-string-literal-whitespace`

  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-&gt; let linesWithIndentation = &quot;&quot;&quot;</span><br><span class="line">       This line doesn&#x27;t begin with whitespace.</span><br><span class="line">           This line begins with four spaces.</span><br><span class="line">       This line doesn&#x27;t begin with whitespace.</span><br><span class="line">       &quot;&quot;&quot;</span><br></pre></td></tr></table></figure>
<p>–&gt;</p>
<p>在上面的例子中，尽管整个多行字符串字面量都是缩进的（源代码缩进），第一行和最后一行没有以空白字符串开始（实际的变量值）。中间一行的缩进用空白字符串（源代码缩进）比关闭引号（<code>&quot;&quot;&quot;</code>）之前的空白字符串多，所以，它的行首将有 4 个空格。</p>
<h3 id="字符串字面量的特殊字符"><a href="#字符串字面量的特殊字符" class="headerlink" title="字符串字面量的特殊字符"></a>字符串字面量的特殊字符</h3><p>字符串字面量可以包含以下特殊字符：</p>
<ul>
<li><p>转义字符 <code>\0</code>(空字符)、<code>\\</code>(反斜线)、<code>\r</code>(水平制表符)、<code>\t</code>(换行符)、<code>\n</code>(回车符)、<code>\&quot;</code>(双引号)、<code>\&#39;</code>(单引号)。</p>
</li>
<li><p>任意的 Unicode 标量，可以写成 <code>\u&#123;</code>n<code>&#125;</code>(u 为小写)，其中n为任意一到八位十六进制数且可用的 Unicode 位码。<br>(Unicode在文档<a href="doc:StringsAndCharacters#Unicode">doc:StringsAndCharacters#Unicode</a> 中进行解析讨论)</p>
</li>
</ul>
<!--
  - test: `stringLiteralUnicodeScalar`

  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; _ = &quot;\u&#123;0&#125;&quot;</span><br><span class="line">&gt;&gt; _ = &quot;\u&#123;00000000&#125;&quot;</span><br><span class="line">&gt;&gt; _ = &quot;\u&#123;000000000&#125;&quot;</span><br><span class="line">!$ error: \u&#123;...&#125; escape sequence expects between 1 and 8 hex digits</span><br><span class="line">!! _ = &quot;\u&#123;000000000&#125;&quot;</span><br><span class="line">!!      ^</span><br><span class="line">&gt;&gt; _ = &quot;\u&#123;10FFFF&#125;&quot;</span><br><span class="line">&gt;&gt; _ = &quot;\u&#123;110000&#125;&quot;</span><br><span class="line">!$ error: invalid unicode scalar</span><br><span class="line">!! _ = &quot;\u&#123;110000&#125;&quot;</span><br><span class="line">!!      ^</span><br></pre></td></tr></table></figure>
<p>–&gt;</p>
<p>下面的代码为各种特殊字符的使用示例。 <code>wiseWords</code> 常量包含了两个双引号。 <code>dollarSign</code>、<code>blackHeart</code> 和 <code>sparklingHeart</code> 常量演示了三种不同格式的 Unicode 标量：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> wiseWords <span class="operator">=</span> <span class="string">&quot;<span class="subst">\&quot;</span>Imagination is more important than knowledge<span class="subst">\&quot;</span> - Einstein&quot;</span></span><br><span class="line"><span class="comment">// &quot;Imagination is more important than knowledge&quot; - Einstein</span></span><br><span class="line"><span class="keyword">let</span> dollarSign <span class="operator">=</span> <span class="string">&quot;<span class="subst">\u&#123;24&#125;</span>&quot;</span>        <span class="comment">// $,  Unicode scalar U+0024</span></span><br><span class="line"><span class="keyword">let</span> blackHeart <span class="operator">=</span> <span class="string">&quot;<span class="subst">\u&#123;2665&#125;</span>&quot;</span>      <span class="comment">// ♥,  Unicode scalar U+2665</span></span><br><span class="line"><span class="keyword">let</span> sparklingHeart <span class="operator">=</span> <span class="string">&quot;<span class="subst">\u&#123;1F496&#125;</span>&quot;</span> <span class="comment">// 💖, Unicode scalar U+1F496</span></span><br></pre></td></tr></table></figure>

<!--
  - test: `specialCharacters`

  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-&gt; let wiseWords = &quot;\&quot;Imagination is more important than knowledge\&quot; - Einstein&quot;</span><br><span class="line">&gt;&gt; print(wiseWords)</span><br><span class="line">&lt;/ &quot;Imagination is more important than knowledge&quot; - Einstein</span><br><span class="line">-&gt; let dollarSign = &quot;\u&#123;24&#125;&quot;        // $,  Unicode scalar U+0024</span><br><span class="line">&gt;&gt; assert(dollarSign == &quot;$&quot;)</span><br><span class="line">-&gt; let blackHeart = &quot;\u&#123;2665&#125;&quot;      // ♥,  Unicode scalar U+2665</span><br><span class="line">&gt;&gt; assert(blackHeart == &quot;♥&quot;)</span><br><span class="line">-&gt; let sparklingHeart = &quot;\u&#123;1F496&#125;&quot; // 💖, Unicode scalar U+1F496</span><br><span class="line">&gt;&gt; assert(sparklingHeart == &quot;💖&quot;)</span><br></pre></td></tr></table></figure>
<p>–&gt;</p>
<p>由于多行字符串字面量使用了三个双引号，而不是一个，所以你可以在多行字符串字面量里直接使用双引号（<code>&quot;</code>）而不必加上转义符（<code>\</code>）。要在多行字符串字面量中使用 <code>&quot;&quot;&quot;</code> 的话，就需要使用至少一个转义符（<code>\</code>）：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> threeDoubleQuotationMarks <span class="operator">=</span> <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">Escaping the first quotation mark <span class="subst">\&quot;</span>&quot;&quot;</span></span><br><span class="line"><span class="string">Escaping all three quotation marks <span class="subst">\&quot;</span><span class="subst">\&quot;</span><span class="subst">\&quot;</span></span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<!--
  - test: `multiline-string-literals`

  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-&gt; let threeDoubleQuotationMarks = &quot;&quot;&quot;</span><br><span class="line">   Escaping the first quotation mark \&quot;&quot;&quot;</span><br><span class="line">   Escaping all three quotation marks \&quot;\&quot;\&quot;</span><br><span class="line">   &quot;&quot;&quot;</span><br><span class="line">&gt;&gt; print(threeDoubleQuotationMarks)</span><br><span class="line">&lt;&lt; Escaping the first quotation mark &quot;&quot;&quot;</span><br><span class="line">&lt;&lt; Escaping all three quotation marks &quot;&quot;&quot;</span><br></pre></td></tr></table></figure>
<p>–&gt;</p>
<h3 id="扩展字符串分隔符"><a href="#扩展字符串分隔符" class="headerlink" title="扩展字符串分隔符"></a>扩展字符串分隔符</h3><p>您可以将字符串字面值置于扩展分隔符内，以便在字符串中包含特殊字符而不触发其转义效果。您将字符串置于双引号（<code>&quot;</code>）内，并在其周围加上井号（<code>#</code>）。例如，打印字符串字面值 <code>#&quot;Line 1\nLine 2&quot;#</code> 会打印出换行符转义序列（<code>\n</code>），而不是将字符串打印在两行上。</p>
<p>在字符串字面值中，如果您需要某个字符的特殊效果，需使字符串中紧跟转义字符（<code>\</code>）后的井号（<code>#</code>）数量相匹配。例如，如果您的字符串是 <code>#&quot;Line 1\nLine 2&quot;#</code> 并且您想要换行，可以使用 <code>#&quot;Line 1\#nLine 2&quot;#</code> 替代。同样，<code>###&quot;Line1###nLine2&quot;###</code> 也能实现换行效果。</p>
<p>扩展分隔符创建的字符串文字也可以是多行字符串文字。您可以使用扩展分隔符在多行字符串中包含文本 <code>&quot;&quot;&quot;</code>，覆盖原有的结束文字的默认行为。例如：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> threeMoreDoubleQuotationMarks <span class="operator">=</span> <span class="string">#&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">Here are three more double quotes: &quot;&quot;&quot;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;#</span></span><br></pre></td></tr></table></figure>

<!--
  - test: `extended-string-delimiters`

  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-&gt; let threeMoreDoubleQuotationMarks = #&quot;&quot;&quot;</span><br><span class="line">   Here are three more double quotes: &quot;&quot;&quot;</span><br><span class="line">   &quot;&quot;&quot;#</span><br><span class="line">&gt;&gt; print(threeMoreDoubleQuotationMarks)</span><br><span class="line">&lt;&lt; Here are three more double quotes: &quot;&quot;&quot;</span><br></pre></td></tr></table></figure>
<p>–&gt;</p>
<h2 id="初始化空字符串"><a href="#初始化空字符串" class="headerlink" title="初始化空字符串"></a>初始化空字符串</h2><p>要创建一个空字符串 <code>String</code> 作为初始值，可以将空的字符串字面量赋值给变量，也可以初始化一个新的 <code>String</code> 实例：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> emptyString <span class="operator">=</span> <span class="string">&quot;&quot;</span>               <span class="comment">// 空字符串字面量</span></span><br><span class="line"><span class="keyword">var</span> anotherEmptyString <span class="operator">=</span> <span class="type">String</span>()  <span class="comment">// 初始化方法</span></span><br><span class="line"><span class="comment">// 两个字符串均为空并等价。</span></span><br></pre></td></tr></table></figure>

<!--
  - test: `emptyStrings`

  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-&gt; var emptyString = &quot;&quot;               // empty string literal</span><br><span class="line">-&gt; var anotherEmptyString = String()  // initializer syntax</span><br><span class="line">// these two strings are both empty, and are equivalent to each other</span><br><span class="line">&gt;&gt; assert(emptyString == anotherEmptyString)</span><br></pre></td></tr></table></figure>
<p>–&gt;</p>
<p>通过检查字符串值的布尔型 <code>isEmpty</code> 属性，来确定该字符串值是否为空。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> emptyString.isEmpty &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Nothing to see here&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 打印输出 &quot;Nothing to see here&quot;</span></span><br></pre></td></tr></table></figure>

<!--
  - test: `emptyStrings`

  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-&gt; if emptyString.isEmpty &#123;</span><br><span class="line">      print(&quot;Nothing to see here&quot;)</span><br><span class="line">   &#125;</span><br><span class="line">&lt;- Nothing to see here</span><br></pre></td></tr></table></figure>
<p>–&gt;</p>
<!--
  TODO: init(size, character)
-->

<h2 id="字符串可变性"><a href="#字符串可变性" class="headerlink" title="字符串可变性"></a>字符串可变性</h2><p>你可以通过将一个特定字符串分配给一个变量来对其进行修改，或者分配给一个常量来保证其不会被修改：</p>
<figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> variableString <span class="operator">=</span> <span class="string">"Horse"</span></span><br><span class="line">variableString <span class="operator">+=</span> <span class="string">" and carriage"</span></span><br><span class="line"><span class="comment">// variableString 现在为 "Horse and carriage"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> constantString <span class="operator">=</span> <span class="string">"Highlander"</span></span><br><span class="line">constantString <span class="operator">+=</span> <span class="string">" and another Highlander"</span></span><br><span class="line"><span class="comment">// 这会报告一个编译错误 compile-time error - 常量字符串不可以被修改。</span></span><br></pre></td></tr></tbody></table></figure>

<!--
  - test: `stringMutability`

  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">-&gt; var variableString = &quot;Horse&quot;</span><br><span class="line">-&gt; variableString += &quot; and carriage&quot;</span><br><span class="line">// variableString is now &quot;Horse and carriage&quot;</span><br><span class="line">---</span><br><span class="line">-&gt; let constantString = &quot;Highlander&quot;</span><br><span class="line">-&gt; constantString += &quot; and another Highlander&quot;</span><br><span class="line">!$ error: left side of mutating operator isn&#x27;t mutable: &#x27;constantString&#x27; is a &#x27;let&#x27; constant</span><br><span class="line">!! constantString += &quot; and another Highlander&quot;</span><br><span class="line">!! ~~~~~~~~~~~~~~ ^</span><br><span class="line">!$ note: change &#x27;let&#x27; to &#x27;var&#x27; to make it mutable</span><br><span class="line">!! let constantString = &quot;Highlander&quot;</span><br><span class="line">!! ^~~</span><br><span class="line">!! var</span><br><span class="line">// this reports a compile-time error - a constant string cannot be modified</span><br></pre></td></tr></table></figure>
<p>–&gt;</p>
<!--
  - test: `stringMutability-ok`

  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-&gt; var variableString = &quot;Horse&quot;</span><br><span class="line">-&gt; variableString += &quot; and carriage&quot;</span><br><span class="line">/&gt; variableString is now \&quot;\(variableString)\&quot;</span><br><span class="line">&lt;/ variableString is now &quot;Horse and carriage&quot;</span><br></pre></td></tr></table></figure>
<p>–&gt;</p>
<blockquote>
<p>注意:<br>在 Objective-C 和 Cocoa 中，需要通过选择两个不同的类（NSString 和 NSMutableString）来指定字符串是否可以被修改。</p>
</blockquote>
<h2 id="字符串是值类型"><a href="#字符串是值类型" class="headerlink" title="字符串是值类型"></a>字符串是值类型</h2><p>在 Swift 中 <code>String</code> 类型是值类型。如果你创建了一个新的字符串，那么当其进行常量、变量赋值操作，或在函数&#x2F;方法中传递时，会进行值拷贝。在前述任一情况下，都会对已有字符串值创建新副本，并对该新副本而非原始字符串进行传递或赋值操作。值类型在<a href="doc:ClassesAndStructures#结构体和枚举是值类型">doc:ClassesAndStructures#结构体和枚举是值类型</a>中进行了详细描述。</p>
<p>Swift 默认拷贝 <code>String</code> 的行为保证了在函数&#x2F;方法向你传递的 <code>String</code> 所属权属于你，无论该值来自于哪里。你可以确信传递的 <code>String</code> 不会被修改，除非你自己去修改它。</p>
<p>在实际编译时，Swift 编译器会优化字符串的使用，使实际的复制只发生在绝对必要的情况下，这意味着你将字符串作为值类型的同时可以获得极高的性能。</p>
<h2 id="使用字符"><a href="#使用字符" class="headerlink" title="使用字符"></a>使用字符</h2><p>如果您想要获取某个字符串里的每一个字符值，可以采用 <code>for</code>-<code>in</code> 循环的方式对该字符串进行遍历操作，从而逐个访问到其中的每一个字符。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> character <span class="keyword">in</span> <span class="string">&quot;Dog!🐶&quot;</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(character)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// D</span></span><br><span class="line"><span class="comment">// o</span></span><br><span class="line"><span class="comment">// g</span></span><br><span class="line"><span class="comment">// !</span></span><br><span class="line"><span class="comment">// 🐶</span></span><br></pre></td></tr></table></figure>

<!--
  - test: `characters`

  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-&gt; for character in &quot;Dog!🐶&quot; &#123;</span><br><span class="line">      print(character)</span><br><span class="line">   &#125;</span><br><span class="line">&lt;/ D</span><br><span class="line">&lt;/ o</span><br><span class="line">&lt;/ g</span><br><span class="line">&lt;/ !</span><br><span class="line">&lt;/ 🐶</span><br></pre></td></tr></table></figure>
<p>–&gt;</p>
<p><code>for</code>-<code>in</code> 循环在 <a href="doc:ControlFlow#For-In-循环">doc:ControlFlow#For-In-循环</a>中进行了详细描述。</p>
<p>另外, 当您有一个只包含一个字符的字符串字面量时，通过明确给出 <code>Character</code> 这种类型的标注，就能够将其转化为一个独立存在的 <code>Character</code> 类型的常量或者变量。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> exclamationMark: <span class="type">Character</span> <span class="operator">=</span> <span class="string">&quot;!&quot;</span></span><br></pre></td></tr></table></figure>

<!--
  - test: `characters`

  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-&gt; let exclamationMark: Character = &quot;!&quot;</span><br></pre></td></tr></table></figure>
<p>–&gt;</p>
<p>字符串可以通过传递一个值类型为 <code>Character</code> 的数组作为自变量来初始化：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> catCharacters: [<span class="type">Character</span>] <span class="operator">=</span> [<span class="string">&quot;C&quot;</span>, <span class="string">&quot;a&quot;</span>, <span class="string">&quot;t&quot;</span>, <span class="string">&quot;!&quot;</span>, <span class="string">&quot;🐱&quot;</span>]</span><br><span class="line"><span class="keyword">let</span> catString <span class="operator">=</span> <span class="type">String</span>(catCharacters)</span><br><span class="line"><span class="built_in">print</span>(catString)</span><br><span class="line"><span class="comment">// 打印 &quot;Cat!🐱&quot;</span></span><br></pre></td></tr></table></figure>

<!--
  - test: `characters`

  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-&gt; let catCharacters: [Character] = [&quot;C&quot;, &quot;a&quot;, &quot;t&quot;, &quot;!&quot;, &quot;🐱&quot;]</span><br><span class="line">-&gt; let catString = String(catCharacters)</span><br><span class="line">-&gt; print(catString)</span><br><span class="line">&lt;- Cat!🐱</span><br></pre></td></tr></table></figure>
<p>–&gt;</p>
<h2 id="连接字符串和字符"><a href="#连接字符串和字符" class="headerlink" title="连接字符串和字符"></a>连接字符串和字符</h2><p>字符串可以通过加法运算符（<code>+</code>）相加在一起（或称“连接”）创建一个新的字符串：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> string1 <span class="operator">=</span> <span class="string">&quot;hello&quot;</span></span><br><span class="line"><span class="keyword">let</span> string2 <span class="operator">=</span> <span class="string">&quot; there&quot;</span></span><br><span class="line"><span class="keyword">var</span> welcome <span class="operator">=</span> string1 <span class="operator">+</span> string2</span><br><span class="line"><span class="comment">// welcome 现在等于 &quot;hello there&quot;</span></span><br></pre></td></tr></table></figure>

<!--
  - test: `concatenation`

  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-&gt; let string1 = &quot;hello&quot;</span><br><span class="line">-&gt; let string2 = &quot; there&quot;</span><br><span class="line">-&gt; var welcome = string1 + string2</span><br><span class="line">/&gt; welcome now equals \&quot;\(welcome)\&quot;</span><br><span class="line">&lt;/ welcome now equals &quot;hello there&quot;</span><br></pre></td></tr></table></figure>
<p>–&gt;</p>
<p>你也可以通过加法赋值运算符（<code>+=</code>）将一个字符串添加到一个已经存在字符串变量上：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> instruction <span class="operator">=</span> <span class="string">&quot;look over&quot;</span></span><br><span class="line">instruction <span class="operator">+=</span> string2</span><br><span class="line"><span class="comment">// instruction 现在等于 &quot;look over there&quot;</span></span><br></pre></td></tr></table></figure>

<!--
  - test: `concatenation`

  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-&gt; var instruction = &quot;look over&quot;</span><br><span class="line">-&gt; instruction += string2</span><br><span class="line">/&gt; instruction now equals \&quot;\(instruction)\&quot;</span><br><span class="line">&lt;/ instruction now equals &quot;look over there&quot;</span><br></pre></td></tr></table></figure>
<p>–&gt;</p>
<p>你可以用 <code>append()</code> 方法将一个字符附加到一个字符串变量的尾部：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> exclamationMark: <span class="type">Character</span> <span class="operator">=</span> <span class="string">&quot;!&quot;</span></span><br><span class="line">welcome.append(exclamationMark)</span><br><span class="line"><span class="comment">// welcome 现在等于 &quot;hello there!&quot;</span></span><br></pre></td></tr></table></figure>

<!--
  - test: `concatenation`

  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-&gt; let exclamationMark: Character = &quot;!&quot;</span><br><span class="line">-&gt; welcome.append(exclamationMark)</span><br><span class="line">/&gt; welcome now equals \&quot;\(welcome)\&quot;</span><br><span class="line">&lt;/ welcome now equals &quot;hello there!&quot;</span><br></pre></td></tr></table></figure>
<p>–&gt;</p>
<blockquote>
<p>注意:<br>你不能将一个字符串或者字符添加到一个已经存在的字符变量上，因为字符变量只能包含一个字符。</p>
</blockquote>
<p>如果你需要使用多行字符串字面量来拼接字符串，并且你需要字符串每一行都以换行符结尾，包括最后一行, 示例如下：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> badStart <span class="operator">=</span> <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    one</span></span><br><span class="line"><span class="string">    two</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">let</span> end <span class="operator">=</span> <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    three</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"><span class="built_in">print</span>(badStart <span class="operator">+</span> end)</span><br><span class="line"><span class="comment">// 打印两行:</span></span><br><span class="line"><span class="comment">// one</span></span><br><span class="line"><span class="comment">// twothree</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> goodStart <span class="operator">=</span> <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    one</span></span><br><span class="line"><span class="string">    two</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"><span class="built_in">print</span>(goodStart <span class="operator">+</span> end)</span><br><span class="line"><span class="comment">// 打印三行:</span></span><br><span class="line"><span class="comment">// one</span></span><br><span class="line"><span class="comment">// two</span></span><br><span class="line"><span class="comment">// three</span></span><br></pre></td></tr></table></figure>

<!--
  - test: `concatenate-multiline-string-literals`

  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">-&gt; let badStart = &quot;&quot;&quot;</span><br><span class="line">       one</span><br><span class="line">       two</span><br><span class="line">       &quot;&quot;&quot;</span><br><span class="line">-&gt; let end = &quot;&quot;&quot;</span><br><span class="line">       three</span><br><span class="line">       &quot;&quot;&quot;</span><br><span class="line">-&gt; print(badStart + end)</span><br><span class="line">// Prints two lines:</span><br><span class="line">&lt;/ one</span><br><span class="line">&lt;/ twothree</span><br><span class="line">---</span><br><span class="line">-&gt; let goodStart = &quot;&quot;&quot;</span><br><span class="line">       one</span><br><span class="line">       two</span><br><span class="line"></span><br><span class="line">       &quot;&quot;&quot;</span><br><span class="line">-&gt; print(goodStart + end)</span><br><span class="line">// Prints three lines:</span><br><span class="line">&lt;/ one</span><br><span class="line">&lt;/ two</span><br><span class="line">&lt;/ three</span><br></pre></td></tr></table></figure>
<p>–&gt;</p>
<p>上面的代码，把 <code>badStart</code> 和 <code>end</code> 拼接起来的字符串非我们想要的结果。因为 <code>badStart</code> 最后一行没有换行符，它与 <code>end</code> 的第一行结合到了一起。相反的，<code>goodStart</code> 的每一行都以换行符结尾，所以它与 <code>end</code> 拼接的字符串总共有三行，正如我们期望的那样。</p>
<h2 id="字符串插值"><a href="#字符串插值" class="headerlink" title="字符串插值"></a>字符串插值</h2><p><strong>字符串</strong> 插值是一种构建新字符串的方式，可以在其中包含常量、变量、字面量和表达式。<strong>字符串字面量</strong> 和 <strong>多行字符串字面量</strong> 都可以使用字符串插值。你插入的字符串字面量的每一项都在以反斜线为前缀的圆括号中：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> multiplier <span class="operator">=</span> <span class="number">3</span></span><br><span class="line"><span class="keyword">let</span> message <span class="operator">=</span> <span class="string">&quot;<span class="subst">\(multiplier)</span> times 2.5 is <span class="subst">\(Double(multiplier) <span class="operator">*</span> <span class="number">2.5</span>)</span>&quot;</span></span><br><span class="line"><span class="comment">// message is &quot;3 times 2.5 is 7.5&quot;</span></span><br></pre></td></tr></table></figure>

<!--
  - test: `stringInterpolation`

  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-&gt; let multiplier = 3</span><br><span class="line">-&gt; let message = &quot;\(multiplier) times 2.5 is \(Double(multiplier) * 2.5)&quot;</span><br><span class="line">/&gt; message is \&quot;\(message)\&quot;</span><br><span class="line">&lt;/ message is &quot;3 times 2.5 is 7.5&quot;</span><br></pre></td></tr></table></figure>
<p>–&gt;</p>
<p>在上面的例子中，<code>multiplier</code> 的值以 <code>\(multiplier)</code> 的形式被插入到一个字符串常量中。当创建字符串执行插值计算时此占位符会被替换为 <code>multiplier</code> 实际的值。</p>
<p><code>multiplier</code> 的值也作为字符串中后面表达式的一部分。该表达式计算 <code>Double(multiplier) * 2.5</code> 的值并将结果（<code>7.5</code>）插入到字符串中。在这个例子中，表达式写为 <code>\(Double(multiplier) * 2.5)</code> 并包含在字符串字面量中。</p>
<p>你可以使用扩展字符串分隔符创建字符串，来包含不想作为字符串插值处理的字符。例如：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">#&quot;Write an interpolated string in Swift using \(multiplier).&quot;#</span>)</span><br><span class="line"><span class="comment">// 打印 &quot;Write an interpolated string in Swift using \(multiplier).&quot;</span></span><br></pre></td></tr></table></figure>

<!--
  - test: `stringInterpolation`

  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-&gt; print(#&quot;Write an interpolated string in Swift using \(multiplier).&quot;#)</span><br><span class="line">&lt;- Write an interpolated string in Swift using \(multiplier).</span><br></pre></td></tr></table></figure>
<p>–&gt;</p>
<p>如果要在使用扩展字符串分隔符的字符串中使用字符串插值，需要在反斜杠后面添加与开头和结尾数量相同扩展字符串分隔符。例如：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">#&quot;6 times 7 is <span class="subst">\#(<span class="number">6</span> <span class="operator">*</span> <span class="number">7</span>)</span>.&quot;#</span>)</span><br><span class="line"><span class="comment">// 打印 &quot;6 times 7 is 42.&quot;</span></span><br></pre></td></tr></table></figure>

<!--
  - test: `stringInterpolation`

  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-&gt; print(#&quot;6 times 7 is \#(6 * 7).&quot;#)</span><br><span class="line">&lt;- 6 times 7 is 42.</span><br></pre></td></tr></table></figure>
<p>–&gt;</p>
<blockquote>
<p>注意:<br>插值字符串中写在括号中的表达式不能包含非转义反斜杠（<code>\</code>），并且不能包含回车或换行符。不过，插值字符串可以包含其他字面量。</p>
</blockquote>
<h2 id="Unicode"><a href="#Unicode" class="headerlink" title="Unicode"></a>Unicode</h2><p><code>Unicode</code> 是一个用于在不同书写系统中对文本进行编码、表示和处理的国际标准。它使你可以用标准格式表示来自任意语言几乎所有的字符，并能够对文本文件或网页这样的外部资源中的字符进行读写操作。Swift 的 <code>String</code> 和 <code>Character</code> 类型是完全兼容 Unicode 标准的。</p>
<h3 id="Unicode-标量"><a href="#Unicode-标量" class="headerlink" title="Unicode 标量"></a>Unicode 标量</h3><p>Swift 的 <code>String</code> 类型是基于 Unicode 标量建立的。Unicode 标量是对应字符或者修饰符的唯一的 21 位数字，例如 <code>U+0061</code> 表示小写的拉丁字母（<code>LATIN SMALL LETTER A</code>）（”<code>a</code>“），<code>U+1F425</code> 表示小鸡表情（<code>FRONT-FACING BABY CHICK</code>）（”<code>🐥</code>“）。</p>
<p>请注意，并非所有 21 位 Unicode 标量值都分配给字符，某些标量被保留用于将来分配或用于 UTF-16 编码。已分配的标量值通常也有一个名称，例如上面示例中的 <code>LATIN SMALL LETTER A</code> 和 <code>FRONT-FACING BABY CHICK</code>。</p>
<h3 id="可扩展的字形群集"><a href="#可扩展的字形群集" class="headerlink" title="可扩展的字形群集"></a>可扩展的字形群集</h3><p>每一个 Swift 的 <code>Character</code> 类型代表一个 <strong>可扩展的字形群</strong>。而一个可扩展的字形群构成了人类可读的单个字符，它由一个或多个（当组合时） Unicode 标量的序列组成。</p>
<p>举个例子，字母 <code>é</code> 可以用单一的 Unicode 标量 <code>é</code>(<code>LATIN SMALL LETTER E WITH ACUTE</code>, 或者 <code>U+00E9</code>)来表示。然而一个标准的字母 <code>e</code>(<code>LATIN SMALL LETTER E</code> 或者 <code>U+0065</code>) 加上一个急促重音（<code>COMBINING ACTUE ACCENT</code>）的标量（<code>U+0301</code>），这样一对标量就表示了同样的字母 <code>é</code>。 这个急促重音的标量形象的将 <code>e</code> 转换成了 <code>é</code>。</p>
<p>在这两种情况中，字母 <code>é</code> 代表了一个单一的 Swift 的 <code>Character</code> 值，同时代表了一个可扩展的字形群。在第一种情况，这个字形群包含一个单一标量；而在第二种情况，它是包含两个标量的字形群：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> eAcute: <span class="type">Character</span> <span class="operator">=</span> <span class="string">&quot;<span class="subst">\u&#123;E9&#125;</span>&quot;</span>                         <span class="comment">// é</span></span><br><span class="line"><span class="keyword">let</span> combinedEAcute: <span class="type">Character</span> <span class="operator">=</span> <span class="string">&quot;<span class="subst">\u&#123;65&#125;</span><span class="subst">\u&#123;301&#125;</span>&quot;</span>          <span class="comment">// e 后面加上 ́</span></span><br><span class="line"><span class="comment">// eAcute 是 é, combinedEAcute 是 é</span></span><br></pre></td></tr></table></figure>

<!--
  - test: `graphemeClusters1`

  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-&gt; let eAcute: Character = &quot;\u&#123;E9&#125;&quot;                         // é</span><br><span class="line">&gt;&gt; assert(eAcute == &quot;é&quot;)</span><br><span class="line">-&gt; let combinedEAcute: Character = &quot;\u&#123;65&#125;\u&#123;301&#125;&quot;          // e followed by ́</span><br><span class="line">&gt;&gt; assert(combinedEAcute == &quot;é&quot;)</span><br><span class="line">/&gt; eAcute is \(eAcute), combinedEAcute is \(combinedEAcute)</span><br><span class="line">&lt;/ eAcute is é, combinedEAcute is é</span><br><span class="line">&gt;&gt; assert(eAcute == combinedEAcute)</span><br></pre></td></tr></table></figure>
<p>–&gt;</p>
<p>可扩展的字形集是一个将许多复杂的脚本字符表示为单个字符值的灵活方式。例如，来自朝鲜语字母表的韩语音节能表示为组合或分解的有序排列。在 Swift 都会表示为同一个单一的 <code>Character</code> 值：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> precomposed: <span class="type">Character</span> <span class="operator">=</span> <span class="string">&quot;<span class="subst">\u&#123;D55C&#125;</span>&quot;</span>                  <span class="comment">// 한</span></span><br><span class="line"><span class="keyword">let</span> decomposed: <span class="type">Character</span> <span class="operator">=</span> <span class="string">&quot;<span class="subst">\u&#123;1112&#125;</span><span class="subst">\u&#123;1161&#125;</span><span class="subst">\u&#123;11AB&#125;</span>&quot;</span>   <span class="comment">// ᄒ, ᅡ, ᆫ</span></span><br><span class="line"><span class="comment">// precomposed 是 한, decomposed 是 한</span></span><br></pre></td></tr></table></figure>

<!--
  - test: `graphemeClusters2`

  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-&gt; let precomposed: Character = &quot;\u&#123;D55C&#125;&quot;                  // 한</span><br><span class="line">&gt;&gt; assert(precomposed == &quot;한&quot;)</span><br><span class="line">-&gt; let decomposed: Character = &quot;\u&#123;1112&#125;\u&#123;1161&#125;\u&#123;11AB&#125;&quot;   // ᄒ, ᅡ, ᆫ</span><br><span class="line">&gt;&gt; assert(decomposed == &quot;한&quot;)</span><br><span class="line">/&gt; precomposed is \(precomposed), decomposed is \(decomposed)</span><br><span class="line">&lt;/ precomposed is 한, decomposed is 한</span><br></pre></td></tr></table></figure>
<p>–&gt;</p>
<p>可拓展的字符群集可以使包围记号（例如 <code>COMBINING ENCLOSING CIRCLE</code> 或者 <code>U+20DD</code>）的标量包围其他 Unicode 标量，作为一个单一的 <code>Character</code> 值：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> enclosedEAcute: <span class="type">Character</span> <span class="operator">=</span> <span class="string">&quot;<span class="subst">\u&#123;E9&#125;</span><span class="subst">\u&#123;20DD&#125;</span>&quot;</span></span><br><span class="line"><span class="comment">// enclosedEAcute 是 é⃝</span></span><br></pre></td></tr></table></figure>

<!--
  - test: `graphemeClusters3`

  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-&gt; let enclosedEAcute: Character = &quot;\u&#123;E9&#125;\u&#123;20DD&#125;&quot;</span><br><span class="line">&gt;&gt; assert(enclosedEAcute == &quot;é⃝&quot;)</span><br><span class="line">/&gt; enclosedEAcute is \(enclosedEAcute)</span><br><span class="line">&lt;/ enclosedEAcute is é⃝</span><br></pre></td></tr></table></figure>
<p>–&gt;</p>
<p>地域性指示符号的 Unicode 标量可以组合成一个单一的 <code>Character</code> 值，例如 <code>REGIONAL INDICATOR SYMBOL LETTER U</code>(<code>U+1F1FA</code>)和 <code>REGIONAL INDICATOR SYMBOL LETTER S</code>(<code>U+1F1F8</code>)：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> regionalIndicatorForUS: <span class="type">Character</span> <span class="operator">=</span> <span class="string">&quot;<span class="subst">\u&#123;1F1FA&#125;</span><span class="subst">\u&#123;1F1F8&#125;</span>&quot;</span></span><br><span class="line"><span class="comment">// regionalIndicatorForUS 是 🇺🇸</span></span><br></pre></td></tr></table></figure>

<!--
  - test: `graphemeClusters4`

  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-&gt; let regionalIndicatorForUS: Character = &quot;\u&#123;1F1FA&#125;\u&#123;1F1F8&#125;&quot;</span><br><span class="line">&gt;&gt; assert(regionalIndicatorForUS == &quot;🇺🇸&quot;)</span><br><span class="line">/&gt; regionalIndicatorForUS is \(regionalIndicatorForUS)</span><br><span class="line">&lt;/ regionalIndicatorForUS is 🇺🇸</span><br></pre></td></tr></table></figure>
<p>–&gt;</p>
<h2 id="计算字符数量"><a href="#计算字符数量" class="headerlink" title="计算字符数量"></a>计算字符数量</h2><p>如果想要获得一个字符串中 <code>Character</code> 值的数量，可以使用 <code>count</code> 属性：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> unusualMenagerie <span class="operator">=</span> <span class="string">&quot;Koala 🐨, Snail 🐌, Penguin 🐧, Dromedary 🐪&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;unusualMenagerie has <span class="subst">\(unusualMenagerie.count)</span> characters&quot;</span>)</span><br><span class="line"><span class="comment">// 打印 &quot;unusualMenagerie has 40 characters&quot;</span></span><br></pre></td></tr></table></figure>

<!--
  - test: `characterCount`

  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-&gt; let unusualMenagerie = &quot;Koala 🐨, Snail 🐌, Penguin 🐧, Dromedary 🐪&quot;</span><br><span class="line">-&gt; print(&quot;unusualMenagerie has \(unusualMenagerie.count) characters&quot;)</span><br><span class="line">&lt;- unusualMenagerie has 40 characters</span><br></pre></td></tr></table></figure>
<p>–&gt;</p>
<p>注意在 Swift 中，使用可拓展的字符群集作为 <code>Character</code> 值来连接或改变字符串时，并不一定会更改字符串的字符数量。</p>
<p>例如，如果你用四个字符的单词 <code>cafe</code> 初始化一个新的字符串，然后添加一个 <code>COMBINING ACTUE ACCENT</code>(<code>U+0301</code>)作为字符串的结尾。最终这个字符串的字符数量仍然是 <code>4</code>，因为第四个字符是 <code>é</code>，而不是 <code>e</code>：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> word <span class="operator">=</span> <span class="string">&quot;cafe&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;the number of characters in <span class="subst">\(word)</span> is <span class="subst">\(word.count)</span>&quot;</span>)</span><br><span class="line"><span class="comment">// 打印 &quot;the number of characters in cafe is 4&quot;</span></span><br><span class="line"></span><br><span class="line">word <span class="operator">+=</span> <span class="string">&quot;<span class="subst">\u&#123;301&#125;</span>&quot;</span>    <span class="comment">// 拼接一个重音，U+0301</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;the number of characters in <span class="subst">\(word)</span> is <span class="subst">\(word.count)</span>&quot;</span>)</span><br><span class="line"><span class="comment">// 打印 &quot;the number of characters in café is 4&quot;</span></span><br></pre></td></tr></table></figure>

<!--
  - test: `characterCount`

  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-&gt; var word = &quot;cafe&quot;</span><br><span class="line">-&gt; print(&quot;the number of characters in \(word) is \(word.count)&quot;)</span><br><span class="line">&lt;- the number of characters in cafe is 4</span><br><span class="line">---</span><br><span class="line">-&gt; word += &quot;\u&#123;301&#125;&quot;    // COMBINING ACUTE ACCENT, U+0301</span><br><span class="line">---</span><br><span class="line">-&gt; print(&quot;the number of characters in \(word) is \(word.count)&quot;)</span><br><span class="line">&lt;- the number of characters in café is 4</span><br></pre></td></tr></table></figure>
<p>–&gt;</p>
<blockquote>
<p>注意:<br>可扩展的字形群可以由多个 Unicode 标量组成。这意味着不同的字符以及相同字符的不同表示方式可能需要不同数量的内存空间来存储。所以 Swift 中的字符在一个字符串中并不一定占用相同的内存空间数量。因此在没有获取字符串的可扩展的字符群的范围时候，就不能计算出字符串的字符数量。如果你正在处理一个长字符串，需要注意 <code>count</code> 属性必须遍历全部的 Unicode 标量，来确定字符串的字符数量。</p>
<p>另外需要注意的是通过 <code>count</code> 属性返回的字符数量并不总是与包含相同字符的 <code>NSString</code> 的 <code>length</code> 属性相同。<code>NSString</code> 的 <code>length</code> 属性是利用 UTF-16 表示的十六位代码单元数字，而不是 Unicode 可扩展的字符群集。</p>
</blockquote>
<h2 id="访问和修改字符串"><a href="#访问和修改字符串" class="headerlink" title="访问和修改字符串"></a>访问和修改字符串</h2><p>你可以通过字符串的属性和方法来访问和修改它，当然也可以用下标语法完成。</p>
<h3 id="字符串索引"><a href="#字符串索引" class="headerlink" title="字符串索引"></a>字符串索引</h3><p>每一个 <code>String</code> 值都有一个关联的索引（<strong>index</strong>）类型，<code>String.Index</code>，它对应着字符串中的每一个 <code>Character</code> 的位置。</p>
<p>前面提到，不同的字符可能会占用不同数量的内存空间，所以要知道 <code>Character</code> 的确定位置，就必须从 <code>String</code> 开头遍历每一个 Unicode 标量直到结尾。因此，Swift 的字符串不能用整数（integer）做索引。</p>
<p>使用 <code>startIndex</code> 属性可以获取一个 <code>String</code> 的第一个 <code>Character</code> 的索引。使用 <code>endIndex</code> 属性可以获取最后一个 <code>Character</code> 的后一个位置的索引。因此，<code>endIndex</code> 属性不能作为一个字符串的有效下标。如果 <code>String</code> 是空串，<code>startIndex</code> 和 <code>endIndex</code> 是相等的。</p>
<p>通过调用 <code>String</code> 的 <code>index(before:)</code> 或 <code>index(after:)</code> 方法，可以立即得到前面或后面的一个索引。你还可以通过调用 <code>index(_:offsetBy:)</code> 方法来获取对应偏移量的索引，这种方式可以避免多次调用 <code>index(before:)</code> 或 <code>index(after:)</code> 方法。</p>
<p>你可以使用下标语法来访问 <code>String</code> 特定索引的 <code>Character</code>。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> greeting <span class="operator">=</span> <span class="string">&quot;Guten Tag!&quot;</span></span><br><span class="line">greeting[greeting.startIndex]</span><br><span class="line"><span class="comment">// G</span></span><br><span class="line">greeting[greeting.index(before: greeting.endIndex)]</span><br><span class="line"><span class="comment">// !</span></span><br><span class="line">greeting[greeting.index(after: greeting.startIndex)]</span><br><span class="line"><span class="comment">// u</span></span><br><span class="line"><span class="keyword">let</span> index <span class="operator">=</span> greeting.index(greeting.startIndex, offsetBy: <span class="number">7</span>)</span><br><span class="line">greeting[index]</span><br><span class="line"><span class="comment">// a</span></span><br></pre></td></tr></table></figure>

<!--
  - test: `stringIndex`

  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">-&gt; let greeting = &quot;Guten Tag!&quot;</span><br><span class="line">&gt;&gt; print(</span><br><span class="line">-&gt; greeting[greeting.startIndex]</span><br><span class="line">&gt;&gt; )</span><br><span class="line">&lt;&lt; G</span><br><span class="line">// G</span><br><span class="line">&gt;&gt; print(</span><br><span class="line">-&gt; greeting[greeting.index(before: greeting.endIndex)]</span><br><span class="line">&gt;&gt; )</span><br><span class="line">&lt;&lt; !</span><br><span class="line">// !</span><br><span class="line">&gt;&gt; print(</span><br><span class="line">-&gt; greeting[greeting.index(after: greeting.startIndex)]</span><br><span class="line">&gt;&gt; )</span><br><span class="line">&lt;&lt; u</span><br><span class="line">// u</span><br><span class="line">-&gt; let index = greeting.index(greeting.startIndex, offsetBy: 7)</span><br><span class="line">&gt;&gt; print(</span><br><span class="line">-&gt; greeting[index]</span><br><span class="line">&gt;&gt; )</span><br><span class="line">&lt;&lt; a</span><br><span class="line">// a</span><br></pre></td></tr></table></figure>
<p>–&gt;</p>
<p>试图获取越界索引对应的 <code>Character</code>，将引发一个运行时错误。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">greeting[greeting.endIndex] <span class="comment">// Error</span></span><br><span class="line">greeting.index(after: greeting.endIndex) <span class="comment">// Error</span></span><br></pre></td></tr></table></figure>

<!--
  The code above triggers an assertion failure in the stdlib, causing a stack
  trace, which makes it a poor candidate for being tested.
-->

<!--
  - test: `emptyStringIndices`

  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-&gt; let emptyString = &quot;&quot;</span><br><span class="line">-&gt; assert(</span><br><span class="line">-&gt; emptyString.isEmpty &amp;&amp; emptyString.startIndex == emptyString.endIndex</span><br><span class="line">-&gt; )</span><br></pre></td></tr></table></figure>
<p>–&gt;</p>
<p>使用 <code>indices</code> 属性会创建一个包含全部索引的范围（<code>Range</code>），用来在一个字符串中访问单个字符。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> index <span class="keyword">in</span> greeting.indices &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;<span class="subst">\(greeting[index])</span> &quot;</span>, terminator: <span class="string">&quot;&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 打印 &quot;G u t e n   T a g ! &quot;</span></span><br></pre></td></tr></table></figure>

<!--
  - test: `stringIndex`

  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-&gt; for index in greeting.indices &#123;</span><br><span class="line">      print(&quot;\(greeting[index]) &quot;, terminator: &quot;&quot;)</span><br><span class="line">   &#125;</span><br><span class="line">&gt;&gt; print(&quot;&quot;)</span><br><span class="line">&lt;&lt; G u t e n   T a g !</span><br><span class="line">// Prints &quot;G u t e n   T a g ! &quot;</span><br></pre></td></tr></table></figure>
<p>–&gt;</p>
<!--
  Workaround for rdar://26016325
-->

<blockquote>
<p>注意:<br>你可以在任意一个确认的并遵循 <code>Collection</code> 协议的类型里面使用 <code>startIndex</code> 和 <code>endIndex</code> 属性或者 <code>index(before:)</code> 、<code>index(after:)</code> 和 <code>index(_:offsetBy:)</code> 方法，如上文所示是使用在 <code>String</code> 中，你也可以使用在 <code>Array</code>、<code>Dictionary</code> 和 <code>Set</code> 中。</p>
</blockquote>
<h3 id="插入和删除"><a href="#插入和删除" class="headerlink" title="插入和删除"></a>插入和删除</h3><p>调用 <code>insert(_:at:)</code> 方法可以在一个字符串的指定索引插入一个字符，调用 <code>insert(contentsOf:at:)</code> 方法可以在一个字符串的指定索引插入一段字符串。</p>
<figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> welcome <span class="operator">=</span> <span class="string">"hello"</span></span><br><span class="line">welcome.insert(<span class="string">"!"</span>, at: welcome.endIndex)</span><br><span class="line"><span class="comment">// welcome 变量现在等于 "hello!"</span></span><br><span class="line"></span><br><span class="line">welcome.insert(contentsOf: <span class="string">" there"</span>, at: welcome.index(before: welcome.endIndex))</span><br><span class="line"><span class="comment">// welcome 变量现在等于 "hello there!"</span></span><br></pre></td></tr></tbody></table></figure>

<!--
  - test: `stringInsertionAndRemoval`

  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-&gt; var welcome = &quot;hello&quot;</span><br><span class="line">-&gt; welcome.insert(&quot;!&quot;, at: welcome.endIndex)</span><br><span class="line">/&gt; welcome now equals \&quot;\(welcome)\&quot;</span><br><span class="line">&lt;/ welcome now equals &quot;hello!&quot;</span><br><span class="line">---</span><br><span class="line">-&gt; welcome.insert(contentsOf: &quot; there&quot;, at: welcome.index(before: welcome.endIndex))</span><br><span class="line">/&gt; welcome now equals \&quot;\(welcome)\&quot;</span><br><span class="line">&lt;/ welcome now equals &quot;hello there!&quot;</span><br></pre></td></tr></table></figure>
<p>–&gt;</p>
<p>调用 <code>remove(at:)</code> 方法可以在一个字符串的指定索引删除一个字符，调用 <code>removeSubrange(_:)</code> 方法可以在一个字符串的指定索引删除一个子字符串。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">welcome.remove(at: welcome.index(before: welcome.endIndex))</span><br><span class="line"><span class="comment">// welcome 现在等于 &quot;hello there&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> range <span class="operator">=</span> welcome.index(welcome.endIndex, offsetBy: <span class="operator">-</span><span class="number">6</span>)<span class="operator">..&lt;</span>welcome.endIndex</span><br><span class="line">welcome.removeSubrange(range)</span><br><span class="line"><span class="comment">// welcome 现在等于 &quot;hello&quot;</span></span><br></pre></td></tr></table></figure>

<!--
  - test: `stringInsertionAndRemoval`

  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-&gt; welcome.remove(at: welcome.index(before: welcome.endIndex))</span><br><span class="line">/&gt; welcome now equals \&quot;\(welcome)\&quot;</span><br><span class="line">&lt;/ welcome now equals &quot;hello there&quot;</span><br><span class="line">---</span><br><span class="line">-&gt; let range = welcome.index(welcome.endIndex, offsetBy: -6)..&lt;welcome.endIndex</span><br><span class="line">-&gt; welcome.removeSubrange(range)</span><br><span class="line">/&gt; welcome now equals \&quot;\(welcome)\&quot;</span><br><span class="line">&lt;/ welcome now equals &quot;hello&quot;</span><br></pre></td></tr></table></figure>
<p>–&gt;</p>
<!--
  TODO: Find and Replace section, once the Swift standard library supports finding substrings
-->

<blockquote>
<p>注意:<br>你可以在任意一个确认的并遵循 <code>RangeReplaceableCollection</code> 协议的类型里面使用 <code>insert(*:at:)</code>、<code>insert(contentsOf:at:)</code>、<code>remove(at:)</code> 和 <code>removeSubrange(*:)</code> 方法，如上文所示是使用在 <code>String</code> 中，你也可以使用在 <code>Array</code>、<code>Dictionary</code> 和 <code>Set</code> 中。</p>
</blockquote>
<h2 id="子字符串"><a href="#子字符串" class="headerlink" title="子字符串"></a>子字符串</h2><p>当你从字符串中获取一个子字符串 —— 例如，使用下标或者 <code>prefix(_:)</code> 之类的方法 —— 就可以得到一个 <a target="_blank" rel="noopener" href="https://developer.apple.com/documentation/swift/substring"><code>Substring</code></a> 的实例，而非另外一个 <code>String</code>。<br>Swift 里的 <code>Substring</code> 绝大部分函数都跟 <code>String</code> 一样，意味着你可以使用同样的方式去操作 <code>Substring</code> 和 <code>String</code>。然而，跟 <code>String</code> 不同的是，你只有在短时间内需要操作字符串时，才会使用 <code>Substring</code>。当你需要长时间保存结果时，就把 <code>Substring</code> 转化为 <code>String</code>, 示例如下：</p>
<figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> greeting <span class="operator">=</span> <span class="string">"Hello, world!"</span></span><br><span class="line"><span class="keyword">let</span> index <span class="operator">=</span> greeting.firstIndex(of: <span class="string">","</span>) <span class="operator">??</span> greeting.endIndex</span><br><span class="line"><span class="keyword">let</span> beginning <span class="operator">=</span> greeting[<span class="operator">..&lt;</span>index]</span><br><span class="line"><span class="comment">// beginning 的值为 "Hello"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 把结果转化为 String 以便长期存储。</span></span><br><span class="line"><span class="keyword">let</span> newString <span class="operator">=</span> <span class="type">String</span>(beginning)</span><br></pre></td></tr></tbody></table></figure>

<!--
  - test: `string-and-substring`

  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-&gt; let greeting = &quot;Hello, world!&quot;</span><br><span class="line">-&gt; let index = greeting.firstIndex(of: &quot;,&quot;) ?? greeting.endIndex</span><br><span class="line">-&gt; let beginning = greeting[..&lt;index]</span><br><span class="line">/&gt; beginning is \&quot;\(beginning)\&quot;</span><br><span class="line">&lt;/ beginning is &quot;Hello&quot;</span><br><span class="line">---</span><br><span class="line">// Convert the result to a String for long-term storage.</span><br><span class="line">-&gt; let newString = String(beginning)</span><br></pre></td></tr></table></figure>
<p>–&gt;</p>
<p>就像 <code>String</code>，每一个 <code>Substring</code> 都会在内存里保存字符集。而 <code>String</code> 和 <code>Substring</code> 的区别在于性能优化上，<code>Substring</code> 可以重用原 <code>String</code> 的内存空间，或者另一个 <code>Substring</code> 的内存空间（<code>String</code> 也有同样的优化，但如果两个 <code>String</code> 共享内存的话，它们就会相等）。这一优化意味着你在修改 <code>String</code> 和 <code>Substring</code> 之前都不需要消耗性能去复制内存。就像前面说的那样，<code>Substring</code> 不适合长期存储 —— 因为它重用了原 <code>String</code> 的内存空间，原 <code>String</code> 的内存空间必须保留直到它的 <code>Substring</code> 不再被使用为止。</p>
<p>上面的例子，<code>greeting</code> 是一个 <code>String</code>，意味着它在内存里有一片空间保存字符集。而由于 <code>beginning</code> 是 <code>greeting</code> 的 <code>Substring</code>，它重用了 <code>greeting</code> 的内存空间。相反，<code>newString</code> 是一个 <code>String</code> —— 它是使用 <code>Substring</code> 创建的，拥有一片自己的内存空间。下面的图展示了他们之间的关系：</p>
<!--
  FIXME: The connection between the code and the figure
  would be clearer if the variable names appeared in the figure.
-->

<p><img src="/course/ios/the-swift-programming-language-in-chinese-6.0/LanguageGuide/StringsAndCharacters/stringSubstring"></p>
<blockquote>
<p>注意:<br><code>String</code> 和 <code>Substring</code> 都遵循<br><a target="_blank" rel="noopener" href="https://developer.apple.com/documentation/swift/stringprotocol"><code>StringProtocol</code></a>协议, 这意味着操作字符串的函数使用 <code>StringProtocol</code> 会更加方便。你可以传入 <code>String</code> 或 <code>Substring</code> 去调用函数。</p>
</blockquote>
<h2 id="比较字符串"><a href="#比较字符串" class="headerlink" title="比较字符串"></a>比较字符串</h2><p>Swift 提供了三种方式来比较文本值：字符串字符相等、前缀相等和后缀相等。</p>
<h3 id="字符串和字符相等"><a href="#字符串和字符相等" class="headerlink" title="字符串和字符相等"></a>字符串和字符相等</h3><p>字符串/字符可以用等于操作符（<code>==</code>）和不等于操作符（<code>!=</code>），详细描述在 <a href="doc:BasicOperators#比较运算符">doc:BasicOperators#比较运算符</a>:</p>
<figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> quotation <span class="operator">=</span> <span class="string">"We're a lot alike, you and I."</span></span><br><span class="line"><span class="keyword">let</span> sameQuotation <span class="operator">=</span> <span class="string">"We're a lot alike, you and I."</span></span><br><span class="line"><span class="keyword">if</span> quotation <span class="operator">==</span> sameQuotation {</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"These two strings are considered equal"</span>)</span><br><span class="line">}</span><br><span class="line"><span class="comment">// 打印 "These two strings are considered equal"</span></span><br></pre></td></tr></tbody></table></figure>

<!--
  - test: `stringEquality`

  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-&gt; let quotation = &quot;We&#x27;re a lot alike, you and I.&quot;</span><br><span class="line">-&gt; let sameQuotation = &quot;We&#x27;re a lot alike, you and I.&quot;</span><br><span class="line">-&gt; if quotation == sameQuotation &#123;</span><br><span class="line">      print(&quot;These two strings are considered equal&quot;)</span><br><span class="line">   &#125;</span><br><span class="line">&lt;- These two strings are considered equal</span><br></pre></td></tr></table></figure>
<p>–&gt;</p>
<p>如果两个字符串值（或两个字符）的可扩展字形群集在规范上等效，那么它们就被认为是相等的。而扩展字形群集在规范上等效是指它们具有相同的语言意义和外观，即便它们是由不同的 Unicode 标量组成。</p>
<!--
  - test: `characterComparisonUsesCanonicalEquivalence`

  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-&gt; let eAcute: Character = &quot;\u&#123;E9&#125;&quot;</span><br><span class="line">-&gt; let combinedEAcute: Character = &quot;\u&#123;65&#125;\u&#123;301&#125;&quot;</span><br><span class="line">-&gt; if eAcute != combinedEAcute &#123;</span><br><span class="line">      print(&quot;not equivalent, which isn&#x27;t expected&quot;)</span><br><span class="line">   &#125; else &#123;</span><br><span class="line">      print(&quot;equivalent, as expected&quot;)</span><br><span class="line">   &#125;</span><br><span class="line">&lt;- equivalent, as expected</span><br></pre></td></tr></table></figure>
<p>–&gt;</p>
<!--
  - test: `stringComparisonUsesCanonicalEquivalence`

  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-&gt; let cafe1 = &quot;caf\u&#123;E9&#125;&quot;</span><br><span class="line">-&gt; let cafe2 = &quot;caf\u&#123;65&#125;\u&#123;301&#125;&quot;</span><br><span class="line">-&gt; if cafe1 != cafe2 &#123;</span><br><span class="line">      print(&quot;not equivalent, which isn&#x27;t expected&quot;)</span><br><span class="line">   &#125; else &#123;</span><br><span class="line">      print(&quot;equivalent, as expected&quot;)</span><br><span class="line">   &#125;</span><br><span class="line">&lt;- equivalent, as expected</span><br></pre></td></tr></table></figure>
<p>–&gt;</p>
<p>例如，<code>LATIN SMALL LETTER E WITH ACUTE</code>(<code>U+00E9</code>)就是标准相等于 <code>LATIN SMALL LETTER E</code>(<code>U+0065</code>)后面加上 <code>COMBINING ACUTE ACCENT</code>(<code>U+0301</code>)。这两个字符群集都是表示字符 <code>é</code> 的有效方式，所以它们被认为是标准相等的：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// &quot;Voulez-vous un café?&quot; 使用 LATIN SMALL LETTER E WITH ACUTE</span></span><br><span class="line"><span class="keyword">let</span> eAcuteQuestion <span class="operator">=</span> <span class="string">&quot;Voulez-vous un caf<span class="subst">\u&#123;E9&#125;</span>?&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// &quot;Voulez-vous un café?&quot; 使用 LATIN SMALL LETTER E and COMBINING ACUTE ACCENT</span></span><br><span class="line"><span class="keyword">let</span> combinedEAcuteQuestion <span class="operator">=</span> <span class="string">&quot;Voulez-vous un caf<span class="subst">\u&#123;65&#125;</span><span class="subst">\u&#123;301&#125;</span>?&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> eAcuteQuestion <span class="operator">==</span> combinedEAcuteQuestion &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;These two strings are considered equal&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 打印 &quot;These two strings are considered equal&quot;</span></span><br></pre></td></tr></table></figure>

<!--
  - test: `stringEquality`

  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// &quot;Voulez-vous un café?&quot; using LATIN SMALL LETTER E WITH ACUTE</span><br><span class="line">-&gt; let eAcuteQuestion = &quot;Voulez-vous un caf\u&#123;E9&#125;?&quot;</span><br><span class="line">---</span><br><span class="line">// &quot;Voulez-vous un café?&quot; using LATIN SMALL LETTER E and COMBINING ACUTE ACCENT</span><br><span class="line">-&gt; let combinedEAcuteQuestion = &quot;Voulez-vous un caf\u&#123;65&#125;\u&#123;301&#125;?&quot;</span><br><span class="line">---</span><br><span class="line">-&gt; if eAcuteQuestion == combinedEAcuteQuestion &#123;</span><br><span class="line">      print(&quot;These two strings are considered equal&quot;)</span><br><span class="line">   &#125;</span><br><span class="line">&lt;- These two strings are considered equal</span><br></pre></td></tr></table></figure>
<p>–&gt;</p>
<p>相反，英语中的 <code>LATIN CAPITAL LETTER A</code>(<code>U+0041</code>，或者 <code>A</code>)不等于俄语中的 <code>CYRILLIC CAPITAL LETTER A</code>(<code>U+0410</code>，或者 <code>A</code>)。视觉上相似，但语言含义却不同。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> latinCapitalLetterA: <span class="type">Character</span> <span class="operator">=</span> <span class="string">&quot;<span class="subst">\u&#123;41&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> cyrillicCapitalLetterA: <span class="type">Character</span> <span class="operator">=</span> <span class="string">&quot;<span class="subst">\u&#123;0410&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> latinCapitalLetterA <span class="operator">!=</span> cyrillicCapitalLetterA &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;These two characters aren&#x27;t equivalent.&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 打印 &quot;These two characters aren&#x27;t equivalent.&quot;</span></span><br></pre></td></tr></table></figure>

<!--
  - test: `stringEquality`

  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">-&gt; let latinCapitalLetterA: Character = &quot;\u&#123;41&#125;&quot;</span><br><span class="line">&gt;&gt; assert(latinCapitalLetterA == &quot;A&quot;)</span><br><span class="line">---</span><br><span class="line">-&gt; let cyrillicCapitalLetterA: Character = &quot;\u&#123;0410&#125;&quot;</span><br><span class="line">&gt;&gt; assert(cyrillicCapitalLetterA == &quot;А&quot;)</span><br><span class="line">---</span><br><span class="line">-&gt; if latinCapitalLetterA != cyrillicCapitalLetterA &#123;</span><br><span class="line">      print(&quot;These two characters aren&#x27;t equivalent.&quot;)</span><br><span class="line">   &#125;</span><br><span class="line">&lt;- These two characters aren&#x27;t equivalent.</span><br></pre></td></tr></table></figure>
<p>–&gt;</p>
<blockquote>
<p>注意: 在 Swift 中，字符串和字符并不区分地域（not locale-sensitive）。</p>
</blockquote>
<!--
  TODO: Add a cross reference to NSString.localizedCompare and
  NSString.localizedCaseInsensitiveCompare.  See also
  https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/Strings/Articles/SearchingStrings.html#//apple_ref/doc/uid/20000149-SW4
-->

<h3 id="前缀和后缀相等"><a href="#前缀和后缀相等" class="headerlink" title="前缀和后缀相等"></a>前缀和后缀相等</h3><p>通过调用字符串的 <code>hasPrefix(*:)</code>或<code>hasSuffix(*:)</code> 方法来检查字符串是否拥有特定前缀或后缀，两个方法均接收一个 <code>String</code> 类型的参数，并返回一个布尔值。</p>
<!--
  - test: `prefixComparisonUsesCharactersNotScalars`

  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">-&gt; let ecole = &quot;\u&#123;E9&#125;cole&quot;</span><br><span class="line">-&gt; if ecole.hasPrefix(&quot;\u&#123;E9&#125;&quot;) &#123;</span><br><span class="line">      print(&quot;Has U+00E9 prefix, as expected.&quot;)</span><br><span class="line">   &#125; else &#123;</span><br><span class="line">      print(&quot;Does not have U+00E9 prefix, which is unexpected.&quot;)</span><br><span class="line">   &#125;</span><br><span class="line">&lt;- Has U+00E9 prefix, as expected.</span><br><span class="line">-&gt; if ecole.hasPrefix(&quot;\u&#123;65&#125;\u&#123;301&#125;&quot;) &#123;</span><br><span class="line">      print(&quot;Has U+0065 U+0301 prefix, as expected.&quot;)</span><br><span class="line">   &#125; else &#123;</span><br><span class="line">      print(&quot;Does not have U+0065 U+0301 prefix, which is unexpected.&quot;)</span><br><span class="line">   &#125;</span><br><span class="line">&lt;- Has U+0065 U+0301 prefix, as expected.</span><br></pre></td></tr></table></figure>
<p>–&gt;</p>
<!--
  - test: `suffixComparisonUsesCharactersNotScalars`

  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">-&gt; let cafe = &quot;caf\u&#123;E9&#125;&quot;</span><br><span class="line">-&gt; if cafe.hasSuffix(&quot;\u&#123;E9&#125;&quot;) &#123;</span><br><span class="line">      print(&quot;Has U+00E9 suffix, as expected.&quot;)</span><br><span class="line">   &#125; else &#123;</span><br><span class="line">      print(&quot;Does not have U+00E9 suffix, which is unexpected.&quot;)</span><br><span class="line">   &#125;</span><br><span class="line">&lt;- Has U+00E9 suffix, as expected.</span><br><span class="line">-&gt; if cafe.hasSuffix(&quot;\u&#123;65&#125;\u&#123;301&#125;&quot;) &#123;</span><br><span class="line">      print(&quot;Has U+0065 U+0301 suffix, as expected.&quot;)</span><br><span class="line">   &#125; else &#123;</span><br><span class="line">      print(&quot;Does not have U+0065 U+0301 suffix, which is unexpected.&quot;)</span><br><span class="line">   &#125;</span><br><span class="line">&lt;- Has U+0065 U+0301 suffix, as expected.</span><br></pre></td></tr></table></figure>
<p>–&gt;</p>
<p>下面的例子以一个字符串数组表示莎士比亚话剧《罗密欧与朱丽叶》中前两场的场景位置：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> romeoAndJuliet <span class="operator">=</span> [</span><br><span class="line">    <span class="string">&quot;Act 1 Scene 1: Verona, A public place&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Act 1 Scene 2: Capulet&#x27;s mansion&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Act 1 Scene 3: A room in Capulet&#x27;s mansion&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Act 1 Scene 4: A street outside Capulet&#x27;s mansion&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Act 1 Scene 5: The Great Hall in Capulet&#x27;s mansion&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Act 2 Scene 1: Outside Capulet&#x27;s mansion&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Act 2 Scene 2: Capulet&#x27;s orchard&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Act 2 Scene 3: Outside Friar Lawrence&#x27;s cell&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Act 2 Scene 4: A street in Verona&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Act 2 Scene 5: Capulet&#x27;s mansion&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Act 2 Scene 6: Friar Lawrence&#x27;s cell&quot;</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<!--
  - test: `prefixesAndSuffixes`

  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">-&gt; let romeoAndJuliet = [</span><br><span class="line">      &quot;Act 1 Scene 1: Verona, A public place&quot;,</span><br><span class="line">      &quot;Act 1 Scene 2: Capulet&#x27;s mansion&quot;,</span><br><span class="line">      &quot;Act 1 Scene 3: A room in Capulet&#x27;s mansion&quot;,</span><br><span class="line">      &quot;Act 1 Scene 4: A street outside Capulet&#x27;s mansion&quot;,</span><br><span class="line">      &quot;Act 1 Scene 5: The Great Hall in Capulet&#x27;s mansion&quot;,</span><br><span class="line">      &quot;Act 2 Scene 1: Outside Capulet&#x27;s mansion&quot;,</span><br><span class="line">      &quot;Act 2 Scene 2: Capulet&#x27;s orchard&quot;,</span><br><span class="line">      &quot;Act 2 Scene 3: Outside Friar Lawrence&#x27;s cell&quot;,</span><br><span class="line">      &quot;Act 2 Scene 4: A street in Verona&quot;,</span><br><span class="line">      &quot;Act 2 Scene 5: Capulet&#x27;s mansion&quot;,</span><br><span class="line">      &quot;Act 2 Scene 6: Friar Lawrence&#x27;s cell&quot;</span><br><span class="line">   ]</span><br></pre></td></tr></table></figure>
<p>–&gt;</p>
<p>你可以调用 <code>hasPrefix(_:)</code> 方法来计算话剧中第一幕的场景数：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> act1SceneCount <span class="operator">=</span> <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> scene <span class="keyword">in</span> romeoAndJuliet &#123;</span><br><span class="line">    <span class="keyword">if</span> scene.hasPrefix(<span class="string">&quot;Act 1 &quot;</span>) &#123;</span><br><span class="line">        act1SceneCount <span class="operator">+=</span> <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;There are <span class="subst">\(act1SceneCount)</span> scenes in Act 1&quot;</span>)</span><br><span class="line"><span class="comment">// 打印 &quot;There are 5 scenes in Act 1&quot;</span></span><br></pre></td></tr></table></figure>

<!--
  - test: `prefixesAndSuffixes`

  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-&gt; var act1SceneCount = 0</span><br><span class="line">-&gt; for scene in romeoAndJuliet &#123;</span><br><span class="line">      if scene.hasPrefix(&quot;Act 1 &quot;) &#123;</span><br><span class="line">         act1SceneCount += 1</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">-&gt; print(&quot;There are \(act1SceneCount) scenes in Act 1&quot;)</span><br><span class="line">&lt;- There are 5 scenes in Act 1</span><br></pre></td></tr></table></figure>
<p>–&gt;</p>
<p>相似地，你可以用 <code>hasSuffix(_:)</code> 方法来计算发生在不同地方的场景数：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mansionCount <span class="operator">=</span> <span class="number">0</span></span><br><span class="line"><span class="keyword">var</span> cellCount <span class="operator">=</span> <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> scene <span class="keyword">in</span> romeoAndJuliet &#123;</span><br><span class="line">    <span class="keyword">if</span> scene.hasSuffix(<span class="string">&quot;Capulet&#x27;s mansion&quot;</span>) &#123;</span><br><span class="line">        mansionCount <span class="operator">+=</span> <span class="number">1</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> scene.hasSuffix(<span class="string">&quot;Friar Lawrence&#x27;s cell&quot;</span>) &#123;</span><br><span class="line">        cellCount <span class="operator">+=</span> <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;<span class="subst">\(mansionCount)</span> mansion scenes; <span class="subst">\(cellCount)</span> cell scenes&quot;</span>)</span><br><span class="line"><span class="comment">// 打印 &quot;6 mansion scenes; 2 cell scenes&quot;</span></span><br></pre></td></tr></table></figure>

<!--
  - test: `prefixesAndSuffixes`

  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">-&gt; var mansionCount = 0</span><br><span class="line">-&gt; var cellCount = 0</span><br><span class="line">-&gt; for scene in romeoAndJuliet &#123;</span><br><span class="line">      if scene.hasSuffix(&quot;Capulet&#x27;s mansion&quot;) &#123;</span><br><span class="line">         mansionCount += 1</span><br><span class="line">      &#125; else if scene.hasSuffix(&quot;Friar Lawrence&#x27;s cell&quot;) &#123;</span><br><span class="line">         cellCount += 1</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">-&gt; print(&quot;\(mansionCount) mansion scenes; \(cellCount) cell scenes&quot;)</span><br><span class="line">&lt;- 6 mansion scenes; 2 cell scenes</span><br></pre></td></tr></table></figure>
<p>–&gt;</p>
<blockquote>
<p>注意:<br><code>hasPrefix(*:)</code> 和 <code>hasSuffix(*:)</code> 方法都是在每个字符串中逐字符比较其可扩展的字符群集是否标准相等，详细描述在 <a href="doc:StringsAndCharacters#字符串和字符相等">doc:StringsAndCharacters#字符串和字符相等</a>.</p>
</blockquote>
<h2 id="字符串的-Unicode-表示形式"><a href="#字符串的-Unicode-表示形式" class="headerlink" title="字符串的 Unicode 表示形式"></a>字符串的 Unicode 表示形式</h2><p>当一个 Unicode 字符串被写进文本文件或者其他储存时，字符串中的 Unicode 标量会用 Unicode 定义的几种 <code>编码格式</code>（encoding forms）编码。每一个字符串中的小块编码都被称 <code>代码单元</code>（code units）。这些包括 UTF-8 编码格式（编码字符串为 8 位的代码单元），UTF-16 编码格式（编码字符串位 16 位的代码单元），以及 UTF-32 编码格式（编码字符串32位的代码单元）。</p>
<p>Swift 提供了几种不同的方式来访问字符串的 Unicode 表示形式。你可以利用 <code>for-in</code> 来对字符串进行遍历，从而以 Unicode 可扩展的字符群集的方式访问每一个 <code>Character</code> 值。该过程在 <a href="doc:StringsAndCharacters#使用字符">doc:StringsAndCharacters#使用字符</a>中进行了描述。</p>
<p>另外，能够以其他三种 Unicode 兼容的方式访问字符串的值：</p>
<ul>
<li>UTF-8 代码单元集合（利用字符串的 <code>utf8</code> 属性进行访问）</li>
<li>UTF-16 代码单元集合（利用字符串的 <code>utf16</code> 属性进行访问）</li>
<li>21 位的 Unicode 标量值集合，也就是字符串的 UTF-32 编码格式（利用字符串的 <code>unicodeScalars</code> 属性进行访问）</li>
</ul>
<p>下面由 <code>D</code>,<code>o</code>,<code>g</code>,<code>‼</code>(<code>DOUBLE EXCLAMATION MARK</code>, Unicode 标量 <code>U+203C</code>)和 🐶(<code>DOG FACE</code>，Unicode 标量为 <code>U+1F436</code>)组成的字符串中的每一个字符代表着一种不同的表示：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> dogString <span class="operator">=</span> <span class="string">&quot;Dog‼🐶&quot;</span></span><br></pre></td></tr></table></figure>

<!--
  - test: `unicodeRepresentations`

  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-&gt; let dogString = &quot;Dog‼🐶&quot;</span><br></pre></td></tr></table></figure>
<p>–&gt;</p>
<h3 id="UTF-8-表示"><a href="#UTF-8-表示" class="headerlink" title="UTF-8 表示"></a>UTF-8 表示</h3><p>你可以通过遍历 <code>String</code> 的 <code>utf8</code> 属性来访问它的 <code>UTF-8</code> 表示。其为 <code>String.UTF8View</code> 类型的属性，<code>UTF8View</code> 是无符号 8 位（<code>UInt8</code>）值的集合，每一个 <code>UInt8</code> 值都是一个字符的 UTF-8 表示：</p>
<p><img src="/UTF8"></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> codeUnit <span class="keyword">in</span> dogString.utf8 &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;<span class="subst">\(codeUnit)</span> &quot;</span>, terminator: <span class="string">&quot;&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;&quot;</span>)</span><br><span class="line"><span class="comment">// 打印 &quot;68 111 103 226 128 188 240 159 144 182 &quot;</span></span><br></pre></td></tr></table></figure>

<!--
  - test: `unicodeRepresentations`

  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-&gt; for codeUnit in dogString.utf8 &#123;</span><br><span class="line">      print(&quot;\(codeUnit) &quot;, terminator: &quot;&quot;)</span><br><span class="line">   &#125;</span><br><span class="line">-&gt; print(&quot;&quot;)</span><br><span class="line">&lt;&lt; 68 111 103 226 128 188 240 159 144 182</span><br><span class="line">// Prints &quot;68 111 103 226 128 188 240 159 144 182 &quot;</span><br></pre></td></tr></table></figure>
<p>–&gt;</p>
<!--
  Workaround for rdar://26016325
-->

<p>上面的例子中，前三个 10 进制 <code>codeUnit</code> 值（<code>68</code>、<code>111</code>、<code>103</code>）代表了字符 <code>D</code>、<code>o</code> 和 <code>g</code>，它们的 UTF-8 表示与 ASCII 表示相同。接下来的三个 10 进制 <code>codeUnit</code> 值（<code>226</code>、<code>128</code>、<code>188</code>）是 <code>DOUBLE EXCLAMATION MARK</code> 的3字节 UTF-8 表示。最后的四个 <code>codeUnit</code> 值（<code>240</code>、<code>159</code>、<code>144</code>、<code>182</code>）是 <code>DOG FACE</code> 的4字节 UTF-8 表示。</p>
<!--
  TODO: contiguousUTF8()
-->

<!--
  TODO: nulTerminatedUTF8()
  (which returns a NativeArray, but handwave this for now)
-->

<h3 id="UTF-16-表示"><a href="#UTF-16-表示" class="headerlink" title="UTF-16 表示"></a>UTF-16 表示</h3><p>你可以通过遍历 <code>String</code> 的 <code>utf16</code> 属性来访问它的 <code>UTF-16</code> 表示。其为 <code>String.UTF16View</code> 类型的属性，<code>UTF16View</code> 是无符号16位（<code>UInt16</code>）值的集合，每一个 <code>UInt16</code> 都是一个字符的 UTF-16 表示：</p>
<p><img src="/course/ios/the-swift-programming-language-in-chinese-6.0/LanguageGuide/StringsAndCharacters/UTF16"></p>
<figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> codeUnit <span class="keyword">in</span> dogString.utf16 {</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"<span class="subst">\(codeUnit)</span> "</span>, terminator: <span class="string">""</span>)</span><br><span class="line">}</span><br><span class="line"><span class="built_in">print</span>(<span class="string">""</span>)</span><br><span class="line"><span class="comment">// 打印 "68 111 103 8252 55357 56374 "</span></span><br></pre></td></tr></tbody></table></figure>

<!--
  - test: `unicodeRepresentations`

  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-&gt; for codeUnit in dogString.utf16 &#123;</span><br><span class="line">      print(&quot;\(codeUnit) &quot;, terminator: &quot;&quot;)</span><br><span class="line">   &#125;</span><br><span class="line">-&gt; print(&quot;&quot;)</span><br><span class="line">&lt;&lt; 68 111 103 8252 55357 56374</span><br><span class="line">// Prints &quot;68 111 103 8252 55357 56374 &quot;</span><br></pre></td></tr></table></figure>
<p>–&gt;</p>
<!--
  Workaround for rdar://26016325
-->

<p>同样，前三个 <code>codeUnit</code> 值（<code>68</code>、<code>111</code>、<code>103</code>）代表了字符 <code>D</code>、<code>o</code> 和 <code>g</code>，它们的 UTF-16 代码单元和 UTF-8 完全相同（因为这些 Unicode 标量表示 ASCII 字符）。</p>
<p>第四个 <code>codeUnit</code> 值（<code>8252</code>）是一个等于十六进制 <code>203C</code> 的的十进制值。这个代表了 <code>DOUBLE EXCLAMATION MARK</code> 字符的 Unicode 标量值 <code>U+203C</code>。这个字符在 UTF-16 中可以用一个代码单元表示。</p>
<p>第五和第六个 <code>codeUnit</code> 值（<code>55357</code> 和 <code>56374</code>）是 <code>DOG FACE</code> 字符的 UTF-16 表示。第一个值为 <code>U+D83D</code>(十进制值为 <code>55357</code>)，第二个值为 <code>U+DC36</code>(十进制值为 <code>56374</code>)。</p>
<h3 id="Unicode-标量表示"><a href="#Unicode-标量表示" class="headerlink" title="Unicode 标量表示"></a>Unicode 标量表示</h3><p>你可以通过遍历 <code>String</code> 值的 <code>unicodeScalars</code> 属性来访问它的 Unicode 标量表示。其为 <code>UnicodeScalarView</code> 类型的属性，<code>UnicodeScalarView</code> 是 <code>UnicodeScalar</code> 类型的值的集合。</p>
<p>每一个 <code>UnicodeScalar</code> 拥有一个 <code>value</code> 属性，可以返回对应的 21 位数值，用 <code>UInt32</code> 来表示：</p>
<p><img src="/course/ios/the-swift-programming-language-in-chinese-6.0/LanguageGuide/StringsAndCharacters/UnicodeScalar"></p>
<figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> scalar <span class="keyword">in</span> dogString.unicodeScalars {</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"<span class="subst">\(scalar.value)</span> "</span>, terminator: <span class="string">""</span>)</span><br><span class="line">}</span><br><span class="line"><span class="built_in">print</span>(<span class="string">""</span>)</span><br><span class="line"><span class="comment">// 打印 "68 111 103 8252 128054 "</span></span><br></pre></td></tr></tbody></table></figure>

<!--
  - test: `unicodeRepresentations`

  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-&gt; for scalar in dogString.unicodeScalars &#123;</span><br><span class="line">      print(&quot;\(scalar.value) &quot;, terminator: &quot;&quot;)</span><br><span class="line">   &#125;</span><br><span class="line">-&gt; print(&quot;&quot;)</span><br><span class="line">&lt;&lt; 68 111 103 8252 128054</span><br><span class="line">// Prints &quot;68 111 103 8252 128054 &quot;</span><br></pre></td></tr></table></figure>
<p>–&gt;</p>
<!--
  Workaround for rdar://26016325
-->

<p>前三个 <code>UnicodeScalar</code> 值（<code>68</code>、<code>111</code>、<code>103</code>）的 <code>value</code> 属性仍然代表字符 <code>D</code>、<code>o</code> 和 <code>g</code>。</p>
<p>第四个 <code>codeUnit</code> 值（<code>8252</code>）仍然是一个等于十六进制 <code>203C</code> 的十进制值。这个代表了 <code>DOUBLE EXCLAMATION MARK</code> 字符的 Unicode 标量 <code>U+203C</code>。</p>
<p>第五个 <code>UnicodeScalar</code> 值的 <code>value</code> 属性，<code>128054</code>，是一个十六进制 <code>1F436</code> 的十进制表示。其等同于 <code>DOG FACE</code> 的 Unicode 标量 <code>U+1F436</code>。</p>
<p>作为查询它们的 <code>value</code> 属性的一种替代方法，每个 <code>UnicodeScalar</code> 值也可以用来构建一个新的 <code>String</code> 值，比如在字符串插值中使用：</p>
<figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> scalar <span class="keyword">in</span> dogString.unicodeScalars {</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"<span class="subst">\(scalar)</span> "</span>)</span><br><span class="line">}</span><br><span class="line"><span class="comment">// D</span></span><br><span class="line"><span class="comment">// o</span></span><br><span class="line"><span class="comment">// g</span></span><br><span class="line"><span class="comment">// ‼</span></span><br><span class="line"><span class="comment">// 🐶</span></span><br></pre></td></tr></tbody></table></figure>

<!--
  - test: `unicodeRepresentations`

  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-&gt; for scalar in dogString.unicodeScalars &#123;</span><br><span class="line">      print(&quot;\(scalar) &quot;)</span><br><span class="line">   &#125;</span><br><span class="line">&lt;/ D</span><br><span class="line">&lt;/ o</span><br><span class="line">&lt;/ g</span><br><span class="line">&lt;/ ‼</span><br><span class="line">&lt;/ 🐶</span><br></pre></td></tr></table></figure>
<p>–&gt;</p>
<!--
This source file is part of the Swift.org open source project

Copyright (c) 2014 - 2022 Apple Inc. and the Swift project authors
Licensed under Apache License v2.0 with Runtime Library Exception

See https://swift.org/LICENSE.txt for license information
See https://swift.org/CONTRIBUTORS.txt for the list of Swift project authors
-->
</body></html>
      </div>
      
      
      
    </div>
    
  <ul class="breadcrumb">
          
            <li><a href="/course/">COURSE</a></li>
            <li><a href="/course/ios/">IOS</a></li>
            <li><a href="/course/ios/the-swift-programming-language-in-chinese-6.0/">THE-SWIFT-PROGRAMMING-LANGUAGE-IN-CHINESE-6.0</a></li>
            <li><a href="/course/ios/the-swift-programming-language-in-chinese-6.0/LanguageGuide/">LANGUAGEGUIDE</a></li>
            <li>STRINGSANDCHARACTERS</li>
          
  </ul>

    
    
    
  </div>


          </div>
          
    <div class="comments" id="comments"></div>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%92%8C%E5%AD%97%E7%AC%A6"><span class="nav-number">1.</span> <span class="nav-text">字符串和字符</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%AD%97%E9%9D%A2%E9%87%8F"><span class="nav-number">1.1.</span> <span class="nav-text">字符串字面量</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%8F%AF%E5%8F%98%E6%80%A7"><span class="nav-number">1.2.</span> <span class="nav-text">字符串可变性</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8F%92%E5%85%A5%E5%92%8C%E5%88%A0%E9%99%A4"><span class="nav-number">1.2.1.</span> <span class="nav-text">插入和删除</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AD%90%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="nav-number">1.3.</span> <span class="nav-text">子字符串</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%AF%94%E8%BE%83%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="nav-number">1.4.</span> <span class="nav-text">比较字符串</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%92%8C%E5%AD%97%E7%AC%A6%E7%9B%B8%E7%AD%89"><span class="nav-number">1.4.1.</span> <span class="nav-text">字符串和字符相等</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%89%8D%E7%BC%80%E5%92%8C%E5%90%8E%E7%BC%80%E7%9B%B8%E7%AD%89"><span class="nav-number">1.4.2.</span> <span class="nav-text">前缀和后缀相等</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#UTF-16-%E8%A1%A8%E7%A4%BA"><span class="nav-number">1.4.3.</span> <span class="nav-text">UTF-16 表示</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Unicode-%E6%A0%87%E9%87%8F%E8%A1%A8%E7%A4%BA"><span class="nav-number">1.4.4.</span> <span class="nav-text">Unicode 标量表示</span></a></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="joe"
      src="/images/me.png">
  <p class="site-author-name" itemprop="name">joe</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">41</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="feed-link motion-element">
    <a href="/atom.xml" rel="alternate">
      <i class="fa fa-rss"></i>RSS
    </a>
  </div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/wangdongyang" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;wangdongyang" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="/wf_pinbo@163.com" title="E-Mail → wf_pinbo@163.com"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/null" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        
  <div class="beian"><a href="http://beian.miit.gov.cn/" rel="noopener" target="_blank">鄂ICP备2021004873号-1 </a>
  </div>

<div class="copyright">
  
  &copy; 2015 – 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">joe</span>
</div>

        












        
      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>

<script src="/js/utils.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  
















  

  


<script>
NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
  var GUEST = ['nick', 'mail', 'link'];
  var guest = 'nick,mail';
  guest = guest.split(',').filter(item => {
    return GUEST.includes(item);
  });
  new Valine({
    el: '#comments',
    verify: false,
    notify: true,
    appId: 'vrpizpRNUt6dhU7r9k6mBGRy-gzGzoHsz',
    appKey: '5lIjR9cSntdE9MvI7DIf55Xn',
    placeholder: "ヾﾉ≧∀≦)o 来呀！吐槽一番吧！",
    avatar: 'mm',
    meta: guest,
    pageSize: '10' || 10,
    visitor: false,
    lang: '' || 'zh-cn',
    path: location.pathname,
    recordIP: false,
    serverURLs: ''
  });
}, window.Valine);
</script>

</body>
</html>
